{"ast":null,"code":"'use strict';\n\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { registerReanimatedError, reportFatalErrorOnJS } from \"./errors.js\";\nimport { isChromeDebugger, isJest, shouldBeUseWeb } from \"./PlatformChecker.js\";\nimport { runOnJS, setupMicrotasks, callMicrotasks, runOnUIImmediately, executeOnUIRuntimeSync } from \"./threads.js\";\nimport { mockedRequestAnimationFrame } from \"./mockedRequestAnimationFrame.js\";\nimport { DEFAULT_LOGGER_CONFIG, logToLogBoxAndConsole, registerLoggerConfig, replaceLoggerImplementation } from \"./logger/index.js\";\nvar IS_JEST = isJest();\nvar SHOULD_BE_USE_WEB = shouldBeUseWeb();\nvar IS_CHROME_DEBUGGER = isChromeDebugger();\nvar _worklet_9679568772195_init_data = {\n  code: \"function overrideLogFunctionImplementation_initializersJs1(){const{replaceLoggerImplementation,runOnJS,logToLogBoxAndConsole}=this.__closure;replaceLoggerImplementation(function(data){'worklet';runOnJS(logToLogBoxAndConsole)(data);});}\",\n  location: \"f:\\\\Coding\\\\Code\\\\SKiddy V2\\\\node_modules\\\\react-native-reanimated\\\\lib\\\\module\\\\initializers.js\",\n  sourceMap: \"{\\\"version\\\":3,\\\"names\\\":[\\\"overrideLogFunctionImplementation_initializersJs1\\\",\\\"replaceLoggerImplementation\\\",\\\"runOnJS\\\",\\\"logToLogBoxAndConsole\\\",\\\"__closure\\\",\\\"data\\\"],\\\"sources\\\":[\\\"f:/Coding/Code/SKiddy V2/node_modules/react-native-reanimated/lib/module/initializers.js\\\"],\\\"mappings\\\":\\\"AAWA,SAAAA,kDAAA,QAAAC,2BAAA,CAAAC,OAAA,CAAAC,qBAAA,OAAAC,SAAA,CAAAH,2BAAA,UAAAI,IAAA,EACA,UAEAH,OAAS,CAAAC,qBAAA,EAAAE,IAAA,EAGP,G\\\",\\\"ignoreList\\\":[]}\",\n  version: \"3.16.2\"\n};\nvar _worklet_6795547978059_init_data = {\n  code: \"function initializersJs2(data){const{runOnJS,logToLogBoxAndConsole}=this.__closure;runOnJS(logToLogBoxAndConsole)(data);}\",\n  location: \"f:\\\\Coding\\\\Code\\\\SKiddy V2\\\\node_modules\\\\react-native-reanimated\\\\lib\\\\module\\\\initializers.js\",\n  sourceMap: \"{\\\"version\\\":3,\\\"names\\\":[\\\"initializersJs2\\\",\\\"data\\\",\\\"runOnJS\\\",\\\"logToLogBoxAndConsole\\\",\\\"__closure\\\"],\\\"sources\\\":[\\\"f:/Coding/Code/SKiddy V2/node_modules/react-native-reanimated/lib/module/initializers.js\\\"],\\\"mappings\\\":\\\"AAiB8B,SAAAA,eAAQA,CAAAC,IAAA,QAAAC,OAAA,CAAAC,qBAAA,OAAAC,SAAA,CAGlCF,OAAO,CAACC,qBAAqB,CAAC,CAACF,IAAI,CAAC,CACtC\\\",\\\"ignoreList\\\":[]}\",\n  version: \"3.16.2\"\n};\nvar overrideLogFunctionImplementation = function () {\n  var _e = [new global.Error(), -4, -27];\n  var overrideLogFunctionImplementation = function overrideLogFunctionImplementation() {\n    replaceLoggerImplementation(function () {\n      var _e = [new global.Error(), -3, -27];\n      var initializersJs2 = function initializersJs2(data) {\n        runOnJS(logToLogBoxAndConsole)(data);\n      };\n      initializersJs2.__closure = {\n        runOnJS: runOnJS,\n        logToLogBoxAndConsole: logToLogBoxAndConsole\n      };\n      initializersJs2.__workletHash = 6795547978059;\n      initializersJs2.__initData = _worklet_6795547978059_init_data;\n      initializersJs2.__stackDetails = _e;\n      return initializersJs2;\n    }());\n  };\n  overrideLogFunctionImplementation.__closure = {\n    replaceLoggerImplementation: replaceLoggerImplementation,\n    runOnJS: runOnJS,\n    logToLogBoxAndConsole: logToLogBoxAndConsole\n  };\n  overrideLogFunctionImplementation.__workletHash = 9679568772195;\n  overrideLogFunctionImplementation.__initData = _worklet_9679568772195_init_data;\n  overrideLogFunctionImplementation.__stackDetails = _e;\n  return overrideLogFunctionImplementation;\n}();\nregisterLoggerConfig(DEFAULT_LOGGER_CONFIG);\noverrideLogFunctionImplementation();\nif (SHOULD_BE_USE_WEB) {\n  global._WORKLET = false;\n  global._log = console.log;\n  global._getAnimationTimestamp = function () {\n    return performance.now();\n  };\n} else {\n  executeOnUIRuntimeSync(registerReanimatedError)();\n  executeOnUIRuntimeSync(registerLoggerConfig)(DEFAULT_LOGGER_CONFIG);\n  executeOnUIRuntimeSync(overrideLogFunctionImplementation)();\n}\nvar _worklet_12552258961364_init_data = {\n  code: \"function callGuardDEV_initializersJs3(fn,...args){try{return fn(...args);}catch(e){if(global.__ErrorUtils){global.__ErrorUtils.reportFatalError(e);}else{throw e;}}}\",\n  location: \"f:\\\\Coding\\\\Code\\\\SKiddy V2\\\\node_modules\\\\react-native-reanimated\\\\lib\\\\module\\\\initializers.js\",\n  sourceMap: \"{\\\"version\\\":3,\\\"names\\\":[\\\"callGuardDEV_initializersJs3\\\",\\\"fn\\\",\\\"args\\\",\\\"e\\\",\\\"global\\\",\\\"__ErrorUtils\\\",\\\"reportFatalError\\\"],\\\"sources\\\":[\\\"f:/Coding/Code/SKiddy V2/node_modules/react-native-reanimated/lib/module/initializers.js\\\"],\\\"mappings\\\":\\\"AA4CO,SAAAA,4BAAmCA,CAAAC,EAAA,IAAAC,IAAA,EAGxC,GAAI,CACF,MAAO,CAAAD,EAAE,CAAC,GAAGC,IAAI,CAAC,CACpB,CAAE,MAAOC,CAAC,CAAE,CACV,GAAIC,MAAM,CAACC,YAAY,CAAE,CACvBD,MAAM,CAACC,YAAY,CAACC,gBAAgB,CAACH,CAAC,CAAC,CACzC,CAAC,IAAM,CACL,KAAM,CAAAA,CAAC,CACT,CACF,CACF\\\",\\\"ignoreList\\\":[]}\",\n  version: \"3.16.2\"\n};\nexport var callGuardDEV = function () {\n  var _e = [new global.Error(), 1, -27];\n  var callGuardDEV = function callGuardDEV(fn) {\n    try {\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n      return fn.apply(void 0, args);\n    } catch (e) {\n      if (global.__ErrorUtils) {\n        global.__ErrorUtils.reportFatalError(e);\n      } else {\n        throw e;\n      }\n    }\n  };\n  callGuardDEV.__closure = {};\n  callGuardDEV.__workletHash = 12552258961364;\n  callGuardDEV.__initData = _worklet_12552258961364_init_data;\n  callGuardDEV.__stackDetails = _e;\n  return callGuardDEV;\n}();\nvar _worklet_1314697224994_init_data = {\n  code: \"function setupCallGuard_initializersJs4(){const{callGuardDEV,runOnJS,reportFatalErrorOnJS}=this.__closure;global.__callGuardDEV=callGuardDEV;global.__ErrorUtils={reportFatalError:function(error){runOnJS(reportFatalErrorOnJS)({message:error.message,stack:error.stack});}};}\",\n  location: \"f:\\\\Coding\\\\Code\\\\SKiddy V2\\\\node_modules\\\\react-native-reanimated\\\\lib\\\\module\\\\initializers.js\",\n  sourceMap: \"{\\\"version\\\":3,\\\"names\\\":[\\\"setupCallGuard_initializersJs4\\\",\\\"callGuardDEV\\\",\\\"runOnJS\\\",\\\"reportFatalErrorOnJS\\\",\\\"__closure\\\",\\\"global\\\",\\\"__callGuardDEV\\\",\\\"__ErrorUtils\\\",\\\"reportFatalError\\\",\\\"error\\\",\\\"message\\\",\\\"stack\\\"],\\\"sources\\\":[\\\"f:/Coding/Code/SKiddy V2/node_modules/react-native-reanimated/lib/module/initializers.js\\\"],\\\"mappings\\\":\\\"AAyDO,SAAAA,8BAA0BA,CAAA,QAAAC,YAAA,CAAAC,OAAA,CAAAC,oBAAA,OAAAC,SAAA,CAG/BC,MAAM,CAACC,cAAc,CAAGL,YAAY,CACpCI,MAAM,CAACE,YAAY,CAAG,CACpBC,gBAAgB,CAAE,QAAAA,CAAAC,KAAK,CAAI,CACzBP,OAAO,CAACC,oBAAoB,CAAC,CAAC,CAC5BO,OAAO,CAAED,KAAK,CAACC,OAAO,CACtBC,KAAK,CAAEF,KAAK,CAACE,KACf,CAAC,CAAC,CACJ,CACF,CAAC,CACH\\\",\\\"ignoreList\\\":[]}\",\n  version: \"3.16.2\"\n};\nexport var setupCallGuard = function () {\n  var _e = [new global.Error(), -4, -27];\n  var setupCallGuard = function setupCallGuard() {\n    global.__callGuardDEV = callGuardDEV;\n    global.__ErrorUtils = {\n      reportFatalError: function reportFatalError(error) {\n        runOnJS(reportFatalErrorOnJS)({\n          message: error.message,\n          stack: error.stack\n        });\n      }\n    };\n  };\n  setupCallGuard.__closure = {\n    callGuardDEV: callGuardDEV,\n    runOnJS: runOnJS,\n    reportFatalErrorOnJS: reportFatalErrorOnJS\n  };\n  setupCallGuard.__workletHash = 1314697224994;\n  setupCallGuard.__initData = _worklet_1314697224994_init_data;\n  setupCallGuard.__stackDetails = _e;\n  return setupCallGuard;\n}();\nfunction createMemorySafeCapturableConsole() {\n  var consoleCopy = Object.fromEntries(Object.entries(console).map(function (_ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n      methodName = _ref2[0],\n      method = _ref2[1];\n    var methodWrapper = function methodWrapper() {\n      return method.apply(void 0, arguments);\n    };\n    if (method.name) {\n      Object.defineProperty(methodWrapper, 'name', {\n        value: method.name,\n        writable: false\n      });\n    }\n    return [methodName, methodWrapper];\n  }));\n  return consoleCopy;\n}\nvar capturableConsole = createMemorySafeCapturableConsole();\nvar _worklet_10507102748750_init_data = {\n  code: \"function setupConsole_initializersJs5(){const{IS_CHROME_DEBUGGER,runOnJS,capturableConsole}=this.__closure;if(!IS_CHROME_DEBUGGER){global.console={assert:runOnJS(capturableConsole.assert),debug:runOnJS(capturableConsole.debug),log:runOnJS(capturableConsole.log),warn:runOnJS(capturableConsole.warn),error:runOnJS(capturableConsole.error),info:runOnJS(capturableConsole.info)};}}\",\n  location: \"f:\\\\Coding\\\\Code\\\\SKiddy V2\\\\node_modules\\\\react-native-reanimated\\\\lib\\\\module\\\\initializers.js\",\n  sourceMap: \"{\\\"version\\\":3,\\\"names\\\":[\\\"setupConsole_initializersJs5\\\",\\\"IS_CHROME_DEBUGGER\\\",\\\"runOnJS\\\",\\\"capturableConsole\\\",\\\"__closure\\\",\\\"global\\\",\\\"console\\\",\\\"assert\\\",\\\"debug\\\",\\\"log\\\",\\\"warn\\\",\\\"error\\\",\\\"info\\\"],\\\"sources\\\":[\\\"f:/Coding/Code/SKiddy V2/node_modules/react-native-reanimated/lib/module/initializers.js\\\"],\\\"mappings\\\":\\\"AA8GO,SAAAA,4BAAwBA,CAAA,QAAAC,kBAAA,CAAAC,OAAA,CAAAC,iBAAA,OAAAC,SAAA,CAG7B,GAAI,CAACH,kBAAkB,CAAE,CAEvBI,MAAM,CAACC,OAAO,CAAG,CAEfC,MAAM,CAAEL,OAAO,CAACC,iBAAiB,CAACI,MAAM,CAAC,CACzCC,KAAK,CAAEN,OAAO,CAACC,iBAAiB,CAACK,KAAK,CAAC,CACvCC,GAAG,CAAEP,OAAO,CAACC,iBAAiB,CAACM,GAAG,CAAC,CACnCC,IAAI,CAAER,OAAO,CAACC,iBAAiB,CAACO,IAAI,CAAC,CACrCC,KAAK,CAAET,OAAO,CAACC,iBAAiB,CAACQ,KAAK,CAAC,CACvCC,IAAI,CAAEV,OAAO,CAACC,iBAAiB,CAACS,IAAI,CAEtC,CAAC,CACH,CACF\\\",\\\"ignoreList\\\":[]}\",\n  version: \"3.16.2\"\n};\nexport var setupConsole = function () {\n  var _e = [new global.Error(), -4, -27];\n  var setupConsole = function setupConsole() {\n    if (!IS_CHROME_DEBUGGER) {\n      global.console = {\n        assert: runOnJS(capturableConsole.assert),\n        debug: runOnJS(capturableConsole.debug),\n        log: runOnJS(capturableConsole.log),\n        warn: runOnJS(capturableConsole.warn),\n        error: runOnJS(capturableConsole.error),\n        info: runOnJS(capturableConsole.info)\n      };\n    }\n  };\n  setupConsole.__closure = {\n    IS_CHROME_DEBUGGER: IS_CHROME_DEBUGGER,\n    runOnJS: runOnJS,\n    capturableConsole: capturableConsole\n  };\n  setupConsole.__workletHash = 10507102748750;\n  setupConsole.__initData = _worklet_10507102748750_init_data;\n  setupConsole.__stackDetails = _e;\n  return setupConsole;\n}();\nvar _worklet_14501637616922_init_data = {\n  code: \"function setupRequestAnimationFrame_initializersJs6(){const{callMicrotasks}=this.__closure;const nativeRequestAnimationFrame=global.requestAnimationFrame;let animationFrameCallbacks=[];let flushRequested=false;global.__flushAnimationFrame=function(frameTimestamp){const currentCallbacks=animationFrameCallbacks;animationFrameCallbacks=[];currentCallbacks.forEach(function(f){return f(frameTimestamp);});callMicrotasks();};global.requestAnimationFrame=function(callback){animationFrameCallbacks.push(callback);if(!flushRequested){flushRequested=true;nativeRequestAnimationFrame(function(timestamp){flushRequested=false;global.__frameTimestamp=timestamp;global.__flushAnimationFrame(timestamp);global.__frameTimestamp=undefined;});}return-1;};}\",\n  location: \"f:\\\\Coding\\\\Code\\\\SKiddy V2\\\\node_modules\\\\react-native-reanimated\\\\lib\\\\module\\\\initializers.js\",\n  sourceMap: \"{\\\"version\\\":3,\\\"names\\\":[\\\"setupRequestAnimationFrame_initializersJs6\\\",\\\"callMicrotasks\\\",\\\"__closure\\\",\\\"nativeRequestAnimationFrame\\\",\\\"global\\\",\\\"requestAnimationFrame\\\",\\\"animationFrameCallbacks\\\",\\\"flushRequested\\\",\\\"__flushAnimationFrame\\\",\\\"frameTimestamp\\\",\\\"currentCallbacks\\\",\\\"forEach\\\",\\\"f\\\",\\\"callback\\\",\\\"push\\\",\\\"timestamp\\\",\\\"__frameTimestamp\\\",\\\"undefined\\\"],\\\"sources\\\":[\\\"f:/Coding/Code/SKiddy V2/node_modules/react-native-reanimated/lib/module/initializers.js\\\"],\\\"mappings\\\":\\\"AA+HA,SAAAA,0CAAsCA,CAAA,QAAAC,cAAA,OAAAC,SAAA,CAKpC,KAAM,CAAAC,2BAA2B,CAAGC,MAAM,CAACC,qBAAqB,CAChE,GAAI,CAAAC,uBAAuB,CAAG,EAAE,CAChC,GAAI,CAAAC,cAAc,CAAG,KAAK,CAC1BH,MAAM,CAACI,qBAAqB,CAAG,SAAAC,cAAc,CAAI,CAC/C,KAAM,CAAAC,gBAAgB,CAAGJ,uBAAuB,CAChDA,uBAAuB,CAAG,EAAE,CAC5BI,gBAAgB,CAACC,OAAO,CAAC,SAAAC,CAAC,QAAI,CAAAA,CAAC,CAACH,cAAc,CAAC,GAAC,CAChDR,cAAc,CAAC,CAAC,CAClB,CAAC,CACDG,MAAM,CAACC,qBAAqB,CAAG,SAAAQ,QAAQ,CAAI,CACzCP,uBAAuB,CAACQ,IAAI,CAACD,QAAQ,CAAC,CACtC,GAAI,CAACN,cAAc,CAAE,CACnBA,cAAc,CAAG,IAAI,CACrBJ,2BAA2B,CAAC,SAAAY,SAAS,CAAI,CACvCR,cAAc,CAAG,KAAK,CACtBH,MAAM,CAACY,gBAAgB,CAAGD,SAAS,CACnCX,MAAM,CAACI,qBAAqB,CAACO,SAAS,CAAC,CACvCX,MAAM,CAACY,gBAAgB,CAAGC,SAAS,CACrC,CAAC,CAAC,CACJ,CAKA,MAAO,CAAC,CAAC,CACX,CAAC,CACH\\\",\\\"ignoreList\\\":[]}\",\n  version: \"3.16.2\"\n};\nvar setupRequestAnimationFrame = function () {\n  var _e = [new global.Error(), -2, -27];\n  var setupRequestAnimationFrame = function setupRequestAnimationFrame() {\n    var nativeRequestAnimationFrame = global.requestAnimationFrame;\n    var animationFrameCallbacks = [];\n    var flushRequested = false;\n    global.__flushAnimationFrame = function (frameTimestamp) {\n      var currentCallbacks = animationFrameCallbacks;\n      animationFrameCallbacks = [];\n      currentCallbacks.forEach(function (f) {\n        return f(frameTimestamp);\n      });\n      callMicrotasks();\n    };\n    global.requestAnimationFrame = function (callback) {\n      animationFrameCallbacks.push(callback);\n      if (!flushRequested) {\n        flushRequested = true;\n        nativeRequestAnimationFrame(function (timestamp) {\n          flushRequested = false;\n          global.__frameTimestamp = timestamp;\n          global.__flushAnimationFrame(timestamp);\n          global.__frameTimestamp = undefined;\n        });\n      }\n      return -1;\n    };\n  };\n  setupRequestAnimationFrame.__closure = {\n    callMicrotasks: callMicrotasks\n  };\n  setupRequestAnimationFrame.__workletHash = 14501637616922;\n  setupRequestAnimationFrame.__initData = _worklet_14501637616922_init_data;\n  setupRequestAnimationFrame.__stackDetails = _e;\n  return setupRequestAnimationFrame;\n}();\nvar _worklet_7445344660080_init_data = {\n  code: \"function initializersJs7(){const{setupCallGuard,setupConsole,SHOULD_BE_USE_WEB,setupMicrotasks,setupRequestAnimationFrame}=this.__closure;setupCallGuard();setupConsole();if(!SHOULD_BE_USE_WEB){setupMicrotasks();setupRequestAnimationFrame();}}\",\n  location: \"f:\\\\Coding\\\\Code\\\\SKiddy V2\\\\node_modules\\\\react-native-reanimated\\\\lib\\\\module\\\\initializers.js\",\n  sourceMap: \"{\\\"version\\\":3,\\\"names\\\":[\\\"initializersJs7\\\",\\\"setupCallGuard\\\",\\\"setupConsole\\\",\\\"SHOULD_BE_USE_WEB\\\",\\\"setupMicrotasks\\\",\\\"setupRequestAnimationFrame\\\",\\\"__closure\\\"],\\\"sources\\\":[\\\"f:/Coding/Code/SKiddy V2/node_modules/react-native-reanimated/lib/module/initializers.js\\\"],\\\"mappings\\\":\\\"AAyKqB,SAAAA,eAAMA,CAAA,QAAAC,cAAA,CAAAC,YAAA,CAAAC,iBAAA,CAAAC,eAAA,CAAAC,0BAAA,OAAAC,SAAA,CAGvBL,cAAc,CAAC,CAAC,CAChBC,YAAY,CAAC,CAAC,CACd,GAAI,CAACC,iBAAiB,CAAE,CACtBC,eAAe,CAAC,CAAC,CACjBC,0BAA0B,CAAC,CAAC,CAC9B,CACF\\\",\\\"ignoreList\\\":[]}\",\n  version: \"3.16.2\"\n};\nexport function initializeUIRuntime() {\n  if (IS_JEST) {\n    globalThis.requestAnimationFrame = mockedRequestAnimationFrame;\n  }\n  runOnUIImmediately(function () {\n    var _e = [new global.Error(), -6, -27];\n    var initializersJs7 = function initializersJs7() {\n      setupCallGuard();\n      setupConsole();\n      if (!SHOULD_BE_USE_WEB) {\n        setupMicrotasks();\n        setupRequestAnimationFrame();\n      }\n    };\n    initializersJs7.__closure = {\n      setupCallGuard: setupCallGuard,\n      setupConsole: setupConsole,\n      SHOULD_BE_USE_WEB: SHOULD_BE_USE_WEB,\n      setupMicrotasks: setupMicrotasks,\n      setupRequestAnimationFrame: setupRequestAnimationFrame\n    };\n    initializersJs7.__workletHash = 7445344660080;\n    initializersJs7.__initData = _worklet_7445344660080_init_data;\n    initializersJs7.__stackDetails = _e;\n    return initializersJs7;\n  }())();\n}","map":{"version":3,"names":["_slicedToArray","registerReanimatedError","reportFatalErrorOnJS","isChromeDebugger","isJest","shouldBeUseWeb","runOnJS","setupMicrotasks","callMicrotasks","runOnUIImmediately","executeOnUIRuntimeSync","mockedRequestAnimationFrame","DEFAULT_LOGGER_CONFIG","logToLogBoxAndConsole","registerLoggerConfig","replaceLoggerImplementation","IS_JEST","SHOULD_BE_USE_WEB","IS_CHROME_DEBUGGER","_worklet_9679568772195_init_data","code","location","sourceMap","version","_worklet_6795547978059_init_data","overrideLogFunctionImplementation","_e","global","Error","initializersJs2","data","__closure","__workletHash","__initData","__stackDetails","_WORKLET","_log","console","log","_getAnimationTimestamp","performance","now","_worklet_12552258961364_init_data","callGuardDEV","fn","_len","arguments","length","args","Array","_key","apply","e","__ErrorUtils","reportFatalError","_worklet_1314697224994_init_data","setupCallGuard","__callGuardDEV","error","message","stack","createMemorySafeCapturableConsole","consoleCopy","Object","fromEntries","entries","map","_ref","_ref2","methodName","method","methodWrapper","name","defineProperty","value","writable","capturableConsole","_worklet_10507102748750_init_data","setupConsole","assert","debug","warn","info","_worklet_14501637616922_init_data","setupRequestAnimationFrame","nativeRequestAnimationFrame","requestAnimationFrame","animationFrameCallbacks","flushRequested","__flushAnimationFrame","frameTimestamp","currentCallbacks","forEach","f","callback","push","timestamp","__frameTimestamp","undefined","_worklet_7445344660080_init_data","initializeUIRuntime","globalThis","initializersJs7"],"sources":["f:\\Coding\\Code\\SKiddy V2\\node_modules\\react-native-reanimated\\src\\initializers.ts"],"sourcesContent":["'use strict';\nimport { registerReanimatedError, reportFatalErrorOnJS } from './errors';\nimport { isChromeDebugger, isJest, shouldBeUseWeb } from './PlatformChecker';\nimport {\n  runOnJS,\n  setupMicrotasks,\n  callMicrotasks,\n  runOnUIImmediately,\n  executeOnUIRuntimeSync,\n} from './threads';\nimport { mockedRequestAnimationFrame } from './mockedRequestAnimationFrame';\nimport {\n  DEFAULT_LOGGER_CONFIG,\n  logToLogBoxAndConsole,\n  registerLoggerConfig,\n  replaceLoggerImplementation,\n} from './logger';\n\nconst IS_JEST = isJest();\nconst SHOULD_BE_USE_WEB = shouldBeUseWeb();\nconst IS_CHROME_DEBUGGER = isChromeDebugger();\n\n// Override the logFunction implementation with the one that adds logs\n// with better stack traces to the LogBox (need to override it after `runOnJS`\n// is defined).\nfunction overrideLogFunctionImplementation() {\n  'worklet';\n  replaceLoggerImplementation((data) => {\n    'worklet';\n    runOnJS(logToLogBoxAndConsole)(data);\n  });\n}\n\n// Register logger config and replace the log function implementation in\n// the React runtime global scope\nregisterLoggerConfig(DEFAULT_LOGGER_CONFIG);\noverrideLogFunctionImplementation();\n\n// this is for web implementation\nif (SHOULD_BE_USE_WEB) {\n  global._WORKLET = false;\n  global._log = console.log;\n  global._getAnimationTimestamp = () => performance.now();\n} else {\n  // Register ReanimatedError and logger config in the UI runtime global scope.\n  // (we are using `executeOnUIRuntimeSync` here to make sure that the changes\n  // are applied before any async operations are executed on the UI runtime)\n  executeOnUIRuntimeSync(registerReanimatedError)();\n  executeOnUIRuntimeSync(registerLoggerConfig)(DEFAULT_LOGGER_CONFIG);\n  executeOnUIRuntimeSync(overrideLogFunctionImplementation)();\n}\n\n// callGuard is only used with debug builds\nexport function callGuardDEV<Args extends unknown[], ReturnValue>(\n  fn: (...args: Args) => ReturnValue,\n  ...args: Args\n): ReturnValue | void {\n  'worklet';\n  try {\n    return fn(...args);\n  } catch (e) {\n    if (global.__ErrorUtils) {\n      global.__ErrorUtils.reportFatalError(e as Error);\n    } else {\n      throw e;\n    }\n  }\n}\n\nexport function setupCallGuard() {\n  'worklet';\n  global.__callGuardDEV = callGuardDEV;\n  global.__ErrorUtils = {\n    reportFatalError: (error: Error) => {\n      runOnJS(reportFatalErrorOnJS)({\n        message: error.message,\n        stack: error.stack,\n      });\n    },\n  };\n}\n\n/**\n * Currently there seems to be a bug in the JSI layer which causes a crash when\n * we try to copy some of the console methods, i.e. `clear` or `dirxml`.\n *\n * The crash happens only in React Native 0.75. It's not reproducible in neither\n * 0.76 nor 0.74. It also happens only in the configuration of a debug app and\n * production bundle.\n *\n * I haven't yet discovered what exactly causes the crash. It's tied to the\n * console methods sometimes being `HostFunction`s. Therefore, as a workaround\n * we don't copy the methods as they are in the original console object, we copy\n * JavaScript wrappers instead.\n */\nfunction createMemorySafeCapturableConsole(): typeof console {\n  const consoleCopy = Object.fromEntries(\n    Object.entries(console).map(([methodName, method]) => {\n      const methodWrapper = function methodWrapper(...args: unknown[]) {\n        return method(...args);\n      };\n      if (method.name) {\n        /**\n         * Set the original method name as the wrapper name if available.\n         *\n         * It might be unnecessary but if we want to fully mimic the console\n         * object we should take into the account the fact some code might rely\n         * on the method name.\n         */\n        Object.defineProperty(methodWrapper, 'name', {\n          value: method.name,\n          writable: false,\n        });\n      }\n      return [methodName, methodWrapper];\n    })\n  );\n\n  return consoleCopy as unknown as typeof console;\n}\n\n// We really have to create a copy of console here. Function runOnJS we use on elements inside\n// this object makes it not configurable\nconst capturableConsole = createMemorySafeCapturableConsole();\n\nexport function setupConsole() {\n  'worklet';\n  if (!IS_CHROME_DEBUGGER) {\n    // @ts-ignore TypeScript doesn't like that there are missing methods in console object, but we don't provide all the methods for the UI runtime console version\n    global.console = {\n      /* eslint-disable @typescript-eslint/unbound-method */\n      assert: runOnJS(capturableConsole.assert),\n      debug: runOnJS(capturableConsole.debug),\n      log: runOnJS(capturableConsole.log),\n      warn: runOnJS(capturableConsole.warn),\n      error: runOnJS(capturableConsole.error),\n      info: runOnJS(capturableConsole.info),\n      /* eslint-enable @typescript-eslint/unbound-method */\n    };\n  }\n}\n\nfunction setupRequestAnimationFrame() {\n  'worklet';\n\n  // Jest mocks requestAnimationFrame API and it does not like if that mock gets overridden\n  // so we avoid doing requestAnimationFrame batching in Jest environment.\n  const nativeRequestAnimationFrame = global.requestAnimationFrame;\n\n  let animationFrameCallbacks: Array<(timestamp: number) => void> = [];\n  let flushRequested = false;\n\n  global.__flushAnimationFrame = (frameTimestamp: number) => {\n    const currentCallbacks = animationFrameCallbacks;\n    animationFrameCallbacks = [];\n    currentCallbacks.forEach((f) => f(frameTimestamp));\n    callMicrotasks();\n  };\n\n  global.requestAnimationFrame = (\n    callback: (timestamp: number) => void\n  ): number => {\n    animationFrameCallbacks.push(callback);\n    if (!flushRequested) {\n      flushRequested = true;\n      nativeRequestAnimationFrame((timestamp) => {\n        flushRequested = false;\n        global.__frameTimestamp = timestamp;\n        global.__flushAnimationFrame(timestamp);\n        global.__frameTimestamp = undefined;\n      });\n    }\n    // Reanimated currently does not support cancelling callbacks requested with\n    // requestAnimationFrame. We return -1 as identifier which isn't in line\n    // with the spec but it should give users better clue in case they actually\n    // attempt to store the value returned from rAF and use it for cancelling.\n    return -1;\n  };\n}\n\nexport function initializeUIRuntime() {\n  if (IS_JEST) {\n    // requestAnimationFrame react-native jest's setup is incorrect as it polyfills\n    // the method directly using setTimeout, therefore the callback doesn't get the\n    // expected timestamp as the only argument: https://github.com/facebook/react-native/blob/main/packages/react-native/jest/setup.js#L28\n    // We override this setup here to make sure that callbacks get the proper timestamps\n    // when executed. For non-jest environments we define requestAnimationFrame in setupRequestAnimationFrame\n    // @ts-ignore TypeScript uses Node definition for rAF, setTimeout, etc which returns a Timeout object rather than a number\n    globalThis.requestAnimationFrame = mockedRequestAnimationFrame;\n  }\n\n  runOnUIImmediately(() => {\n    'worklet';\n    setupCallGuard();\n    setupConsole();\n    if (!SHOULD_BE_USE_WEB) {\n      setupMicrotasks();\n      setupRequestAnimationFrame();\n    }\n  })();\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}